# ERPç³»ç»Ÿå‰ç«¯é‡æ„æ€»ç»“

## ğŸ“‹ é‡æ„æ¦‚è§ˆ

æœ¬æ¬¡é‡æ„å®Œå…¨å¯¹é½äº†åç«¯ä¸šåŠ¡æµç¨‹æ–‡æ¡£ï¼Œå®ç°äº†ä¸€ä¸ªä¸¥è°¨é—­ç¯çš„ERPä¸šåŠ¡ç³»ç»Ÿã€‚

## âœ… å®Œæˆçš„ä»»åŠ¡

### 1. è°ƒæ•´æšä¸¾å¸¸é‡
- âœ… æ·»åŠ  `OrderItemCategory`ï¼ˆè®¢å•æ˜ç»†ç±»åˆ«ï¼‰
- âœ… æ·»åŠ  `ProductStatus`ï¼ˆäº§å“/å¥—é¤çŠ¶æ€ï¼‰
- âœ… å®Œå–„ `MaterialCategory`ï¼ˆå¢åŠ è¾…æç±»å‹ï¼‰
- âœ… æ‰€æœ‰æšä¸¾ä¸åç«¯ä¿æŒä¸€è‡´

**æ–‡ä»¶**: `packages/main/src/constants/enums.ts`

---

### 2. åˆ›å»ºå¥—é¤ç®¡ç†æ¨¡å—
- âœ… åˆ›å»ºå¥—é¤åˆ—è¡¨é¡µé¢ï¼ˆ`ProductList.tsx`ï¼‰
- âœ… åˆ›å»ºå¥—é¤è¯¦æƒ…å¼¹çª—ï¼ˆå«ç‰©æ–™æ¸…å•ï¼‰
- âœ… åˆ›å»ºå¥—é¤APIæ¥å£ï¼ˆ`api/product.ts`ï¼‰
- âœ… æ”¯æŒå¥—é¤çš„å¢åˆ æ”¹æŸ¥
- âœ… æ˜¾ç¤ºæˆæœ¬ä»·ã€å”®ä»·ã€æ¯›åˆ©ç­‰ä¿¡æ¯

**æ–°å¢æ–‡ä»¶**:
- `packages/main/src/features/product/List.tsx`
- `packages/main/src/features/product/config.tsx`
- `packages/main/src/features/product/types.ts`
- `packages/main/src/features/product/index.ts`
- `packages/main/src/features/product/index.module.less`
- `packages/main/src/api/product.ts`

---

### 3. å®Œå–„å®¢æˆ·ç®¡ç†æ¨¡å—
- âœ… æ·»åŠ **é‡æˆ¿**åŠŸèƒ½ï¼ˆè°ƒç”¨`customer_measure`æµç¨‹ï¼‰
- âœ… æ·»åŠ **è½¬è®¢å•**åŠŸèƒ½ï¼ˆå¼¹å‡ºå¥—é¤é€‰æ‹©ï¼Œè°ƒç”¨`order_create_from_product`æµç¨‹ï¼‰
- âœ… æ ¹æ®å®¢æˆ·çŠ¶æ€æ˜¾ç¤ºä¸åŒæ“ä½œæŒ‰é’®
  - `lead`çŠ¶æ€ â†’ æ˜¾ç¤º"é‡æˆ¿"æŒ‰é’®
  - `measured`/`quoted`çŠ¶æ€ â†’ æ˜¾ç¤º"è½¬è®¢å•"æŒ‰é’®
- âœ… è½¬è®¢å•åè‡ªåŠ¨è·³è½¬åˆ°è®¢å•è¯¦æƒ…é¡µ

**ä¿®æ”¹æ–‡ä»¶**: `packages/main/src/features/customer/List.tsx`

---

### 4. å®Œå–„è®¢å•ç®¡ç†æ¨¡å—
- âœ… åˆ›å»º**è®¢å•è¯¦æƒ…é¡µ**ï¼ˆ`OrderDetail.tsx`ï¼‰
- âœ… å®ç°è®¢å•æ˜ç»†çš„å¢åˆ æ”¹æŸ¥
- âœ… å®ç°æ˜ç»†ç¼–è¾‘åŠŸèƒ½ï¼ˆæ•°é‡ã€å•ä»·è°ƒæ•´ï¼Œè‡ªåŠ¨é‡ç®—æ€»é¢ï¼‰
- âœ… å®ç°**çŠ¶æ€æµè½¬æŒ‰é’®**ï¼š
  - `draft` â†’ **ç­¾çº¦**æŒ‰é’®ï¼ˆè°ƒç”¨`order_sign`æµç¨‹ï¼‰
  - `signed` â†’ **å¼€å·¥**æŒ‰é’®ï¼ˆè°ƒç”¨`order_start`æµç¨‹ï¼‰
  - `in_progress` â†’ **å®Œå·¥**æŒ‰é’®ï¼ˆè°ƒç”¨`order_complete`æµç¨‹ï¼‰
- âœ… æ˜¾ç¤ºé‡‘é¢ç»Ÿè®¡ï¼ˆè®¢å•æ€»é¢ã€å·²æ”¶é‡‘é¢ã€æœªæ”¶é‡‘é¢ã€æˆæœ¬é‡‘é¢ï¼‰
- âœ… åªæœ‰è‰ç¨¿çŠ¶æ€å¯ä»¥ç¼–è¾‘æ˜ç»†

**æ–°å¢æ–‡ä»¶**: 
- `packages/main/src/features/order/Detail.tsx`
- å®Œå–„ `packages/main/src/features/order/types.ts`ï¼ˆæ·»åŠ `OrderMaterial`ç±»å‹ï¼‰
- å®Œå–„ `packages/main/src/api/order.ts`ï¼ˆæ·»åŠ æ˜ç»†ç›¸å…³APIï¼‰

---

### 5. è°ƒæ•´è´¢åŠ¡ç®¡ç†æ¨¡å—ä¸ºæ”¶æ¬¾ç®¡ç†
- âœ… æ·»åŠ **ç¡®è®¤æ”¶æ¬¾**æŒ‰é’®ï¼ˆåªåœ¨`pending`çŠ¶æ€æ˜¾ç¤ºï¼‰
- âœ… è°ƒç”¨`payment_confirm`æµç¨‹ç¡®è®¤æ”¶æ¬¾
- âœ… ç¡®è®¤åè‡ªåŠ¨æ›´æ–°è®¢å•å·²æ”¶é‡‘é¢
- âœ… èœå•åç§°æ”¹ä¸º"æ”¶æ¬¾ç®¡ç†"

**ä¿®æ”¹æ–‡ä»¶**:
- `packages/main/src/features/finance/List.tsx`
- `packages/main/src/features/finance/config.tsx`

---

### 6. åˆ›å»º codeflow API å°è£…
- âœ… å°è£…æ‰€æœ‰ä¸šåŠ¡æµç¨‹æ“ä½œï¼š
  - `customerMeasure()` - å®¢æˆ·é‡æˆ¿
  - `orderCreateFromProduct()` - ä»å¥—é¤åˆ›å»ºè®¢å•
  - `orderMaterialUpdate()` - æ›´æ–°è®¢å•æ˜ç»†
  - `orderSign()` - è®¢å•ç­¾çº¦
  - `orderStart()` - è®¢å•å¼€å·¥
  - `orderComplete()` - è®¢å•å®Œå·¥
  - `paymentConfirm()` - ç¡®è®¤æ”¶æ¬¾

**ä¿®æ”¹æ–‡ä»¶**: `packages/main/src/api/codeflow.ts`

---

### 7. è°ƒæ•´è·¯ç”±å’Œèœå•é…ç½®
- âœ… æ·»åŠ å¥—é¤ç®¡ç†è·¯ç”± `/product`
- âœ… æ·»åŠ è®¢å•è¯¦æƒ…è·¯ç”± `/order/:id`
- âœ… æ›´æ–°èœå•é¡ºåºï¼Œç¬¦åˆä¸šåŠ¡æµç¨‹ï¼š
  1. å·¥ä½œå°
  2. **å®¢æˆ·ç®¡ç†** â†’ çº¿ç´¢å½•å…¥
  3. **å¥—é¤ç®¡ç†** â†’ å¥—é¤é€‰æ‹©
  4. **è®¢å•ç®¡ç†** â†’ åˆ›å»ºè®¢å•
  5. é¡¹ç›®ç®¡ç†
  6. **æ”¶æ¬¾ç®¡ç†** â†’ ç¡®è®¤æ”¶æ¬¾
  7. ç‰©æ–™ç®¡ç†
  8. åŸºç¡€æ•°æ®
  9. ç³»ç»ŸåŠŸèƒ½

**ä¿®æ”¹æ–‡ä»¶**:
- `packages/main/src/router/index.tsx`
- `packages/main/src/router/menu.config.tsx`

---

### 8. å·¥å…·å‡½æ•°è¡¥å……
- âœ… æ·»åŠ  `formatMoney()` æ ¼å¼åŒ–é‡‘é¢å‡½æ•°

**ä¿®æ”¹æ–‡ä»¶**: `packages/main/src/utils/format.ts`

---

## ğŸ”„ ä¸šåŠ¡æµç¨‹é—­ç¯

### å®Œæ•´ä¸šåŠ¡æµç¨‹
```
1. å®¢æˆ·ç®¡ç† â†’ åˆ›å»ºå®¢æˆ·ï¼ˆleadçŠ¶æ€ï¼‰
            â†“
2. å®¢æˆ·è¯¦æƒ… â†’ é‡æˆ¿ï¼ˆè°ƒç”¨customer_measureï¼ŒçŠ¶æ€å˜ä¸ºmeasuredï¼‰
            â†“
3. å®¢æˆ·è¯¦æƒ… â†’ è½¬è®¢å•ï¼ˆé€‰æ‹©å¥—é¤ï¼Œè°ƒç”¨order_create_from_productï¼ŒçŠ¶æ€å˜ä¸ºquotedï¼‰
            â†“
4. è®¢å•è¯¦æƒ… â†’ ç¼–è¾‘æ˜ç»†ï¼ˆè°ƒæ•´æ•°é‡ã€å•ä»·ï¼‰
            â†“
5. è®¢å•è¯¦æƒ… â†’ ç­¾çº¦ï¼ˆè°ƒç”¨order_signï¼ŒçŠ¶æ€å˜ä¸ºsignedï¼Œåˆ›å»ºå®šé‡‘æ”¶æ¬¾è®°å½•ï¼‰
            â†“
6. æ”¶æ¬¾ç®¡ç† â†’ ç¡®è®¤æ”¶æ¬¾ï¼ˆè°ƒç”¨payment_confirmï¼Œæ›´æ–°å·²æ”¶é‡‘é¢ï¼‰
            â†“
7. è®¢å•è¯¦æƒ… â†’ å¼€å·¥ï¼ˆè°ƒç”¨order_startï¼ŒçŠ¶æ€å˜ä¸ºin_progressï¼‰
            â†“
8. è®¢å•è¯¦æƒ… â†’ å®Œå·¥ï¼ˆè°ƒç”¨order_completeï¼ŒçŠ¶æ€å˜ä¸ºcompletedï¼‰
```

### çŠ¶æ€è”åŠ¨
- å®¢æˆ·çŠ¶æ€ä¼šéšè®¢å•çŠ¶æ€è‡ªåŠ¨æ›´æ–°
- è®¢å•å·²æ”¶é‡‘é¢ä¼šéšæ”¶æ¬¾ç¡®è®¤è‡ªåŠ¨ç´¯åŠ 
- è®¢å•æ€»é‡‘é¢ä¼šéšæ˜ç»†å˜åŒ–è‡ªåŠ¨é‡ç®—

---

## ğŸ“Š æŠ€æœ¯æ ˆ

- **React 18** + **TypeScript**
- **Ant Design** UIç»„ä»¶åº“
- **React Router** è·¯ç”±ç®¡ç†
- **ä»£ç æµç¨‹**è°ƒç”¨ä¸šåŠ¡é€»è¾‘

---

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **ä¸šåŠ¡å¯¹é½**: å®Œå…¨æŒ‰ç…§åç«¯ä¸šåŠ¡æµç¨‹æ–‡æ¡£å®ç°
2. **ä¸¥è°¨é—­ç¯**: çŠ¶æ€æµè½¬åªèƒ½å•å‘å‰è¿›ï¼Œä¸å¯å›é€€
3. **ä¸è¿‡åº¦è®¾è®¡**: åªå®ç°æ–‡æ¡£è¦æ±‚çš„åŠŸèƒ½ï¼Œä¸æ·»åŠ é¢å¤–å¤æ‚åº¦
4. **æ•°æ®è”åŠ¨**: è®¢å•ã€æ”¶æ¬¾ã€å®¢æˆ·çŠ¶æ€è‡ªåŠ¨è”åŠ¨æ›´æ–°
5. **æƒé™æ§åˆ¶**: æ ¹æ®çŠ¶æ€æ§åˆ¶æŒ‰é’®æ˜¾ç¤ºå’Œæ“ä½œæƒé™

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è®¢å•æ˜ç»†å¯è°ƒæ•´**: ä»å¥—é¤å¤åˆ¶è¿‡æ¥çš„æ˜ç»†å¯ä»¥éšæ„è°ƒæ•´ï¼Œä¸å½±å“å¥—é¤æ¨¡æ¿
2. **é‡‘é¢è‡ªåŠ¨è®¡ç®—**: å°è®¡ = æ•°é‡ Ã— å•ä»·ï¼Œæ€»é‡‘é¢ = sum(å°è®¡)
3. **çŠ¶æ€åªèƒ½å‰è¿›**: å®¢æˆ·çŠ¶æ€ã€è®¢å•çŠ¶æ€åªèƒ½å•å‘æµè½¬ï¼Œä¸èƒ½å›é€€
4. **æ”¶æ¬¾éœ€ç¡®è®¤**: åˆ›å»ºæ”¶æ¬¾åæ˜¯pendingçŠ¶æ€ï¼Œéœ€è´¢åŠ¡ç¡®è®¤åæ‰ç®—å·²æ”¶
5. **å·¥é•¿å¿…å¡«**: è®¢å•å¼€å·¥å‰å¿…é¡»åˆ†é…å·¥é•¿

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. æ·»åŠ ç”¨æˆ·é€‰æ‹©å™¨ï¼ˆé”€å”®ã€è®¾è®¡å¸ˆã€å·¥é•¿é€‰æ‹©ï¼‰
2. æ·»åŠ è®¢å•å®¡æ‰¹æµç¨‹
3. æ·»åŠ æ‰“å°åŠŸèƒ½ï¼ˆåˆåŒã€æ”¶æ¬¾å•ï¼‰
4. æ·»åŠ æ•°æ®ç»Ÿè®¡å’ŒæŠ¥è¡¨
5. æ·»åŠ å®¢æˆ·è·Ÿè¿›è®°å½•æŸ¥çœ‹
6. å®Œå–„æƒé™æ§åˆ¶ï¼ˆåŸºäºè§’è‰²ï¼‰

---

**å®Œæˆæ—¶é—´**: 2025-10-31
**é‡æ„çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ

