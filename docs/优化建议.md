# erp-web - 优化建议

> **最后更新**: 2025-12-01

## 代码分割

```typescript
// vite.config.ts
build: {
  rollupOptions: {
    output: {
      manualChunks: {
        'vendor-react': ['react', 'react-dom'],
        'vendor-antd': ['antd'],
      },
    },
  },
}
```

---

## 路由懒加载

```typescript
// ✅ 懒加载
const CustomerList = lazy(() => import('./features/customer/List'));

<Suspense fallback={<Spin />}>
  <Route path="/customers" element={<CustomerList />} />
</Suspense>
```

---

## 图片优化

```bash
# 使用 WebP
<img src="/logo.webp" loading="lazy" />

# Nginx 缓存
location ~* \.(jpg|png|webp)$ {
  expires 30d;
}
```

---

## Ant Design 按需加载

```typescript
// ✅ 只导入需要的
import { Button, Table } from 'antd';

// ❌ 全量导入
import * as antd from 'antd';
```

---

## 构建优化

```bash
# 分析打包大小
pnpm build
pnpm preview

# 检查打包产物
du -sh dist/*
```

---

## 性能目标

| 指标 | 当前 | 目标 |
|------|------|------|
| 首屏加载 | 2s | < 1.5s |
| Bundle 大小 | - | < 500KB |
| FCP | - | < 1s |
